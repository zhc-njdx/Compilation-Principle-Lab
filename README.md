# 编译原理Lab6

## 实验过程

> [本次实验](http://47.122.3.40:8081/#/lab6-global-and-if/lab6-global-and-if)实现了对全局变量以及`if-else`语句的翻译

==全局变量==：全局变量的翻译可以可以参考`lab5`的局部变量的翻译，只是使用的`API`不一样，处理的逻辑是一致的。在处理中，增加了一个`isGlobal`字段来判断接下来声明的变量是否是全局变量，然后在对应的`visit`函数中增加对全局变量处理的分支。

==if-else语句==：`if-else`语句的处理主要分为`condition`的处理和跳转的处理。`condition`的处理就是处理那几个关系运算符，核心逻辑都是一致的，可以选择写一个公共的函数供那些`visitor`函数使用。对跳转的处理主要`if-else`语句的`visit`函数中，创建基本块，然后根据`condition`返回的`valueRef`进行相应的跳转即可。

## 遇到的问题

要注意的是`icmp`指令生成的`LLVMValueRef`是`i1`类型，如果之后继续进行运算需要先转成`i32`的，比如处理`a>b>c`。