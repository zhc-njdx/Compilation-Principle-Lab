# 编译原理Lab8

## 实验过程

> [本实验](http://47.122.3.40:8081/#/lab8-function-and-array/lab8-function-and-array)实现了对函数参数是数组情况的翻译

由于之前实验中函数参数较为简单（只有`int`），所以部分处理逻辑会因为数组情况的加入出现错误，对函数定义`visitor`函数的修改较大。

主要需要考虑的地方有两个：

1. 将数组作为实参传入函数时，需要将数组类型转化为指针类型
2. 在函数内部，针对数组的处理和针对指针（函数形参）的处理是略有区别的，体现在`GEP`指令上

## 遇到的问题

对于函数末尾没有`return`语句的情况。

> 之前处理这种情况的时候，判断是否处理过`return`语句，如果没有就增加返回语句

但是由于`if-else`语句和`while`语句的出现，在控制块中就会出现`return`语句，即使处理过返回语句，也不能判断该函数是否被正确返回了。

最后采用：**无论何种情况，都在最后增加返回语句**。

